{"ast":null,"code":"import { Util } from './Util.js';\nimport { Konva } from './Global.js';\n\nfunction simplifyArray(arr) {\n  var retArr = [],\n      len = arr.length,\n      util = Util,\n      n,\n      val;\n\n  for (n = 0; n < len; n++) {\n    val = arr[n];\n\n    if (util._isNumber(val)) {\n      val = Math.round(val * 1000) / 1000;\n    } else if (!util._isString(val)) {\n      val = val + '';\n    }\n\n    retArr.push(val);\n  }\n\n  return retArr;\n}\n\nvar COMMA = ',',\n    OPEN_PAREN = '(',\n    CLOSE_PAREN = ')',\n    OPEN_PAREN_BRACKET = '([',\n    CLOSE_BRACKET_PAREN = '])',\n    SEMICOLON = ';',\n    DOUBLE_PAREN = '()',\n    EQUALS = '=',\n    CONTEXT_METHODS = ['arc', 'arcTo', 'beginPath', 'bezierCurveTo', 'clearRect', 'clip', 'closePath', 'createLinearGradient', 'createPattern', 'createRadialGradient', 'drawImage', 'ellipse', 'fill', 'fillText', 'getImageData', 'createImageData', 'lineTo', 'moveTo', 'putImageData', 'quadraticCurveTo', 'rect', 'restore', 'rotate', 'save', 'scale', 'setLineDash', 'setTransform', 'stroke', 'strokeText', 'transform', 'translate'];\nvar CONTEXT_PROPERTIES = ['fillStyle', 'strokeStyle', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'lineCap', 'lineDashOffset', 'lineJoin', 'lineWidth', 'miterLimit', 'font', 'textAlign', 'textBaseline', 'globalAlpha', 'globalCompositeOperation', 'imageSmoothingEnabled'];\nconst traceArrMax = 100;\nexport class Context {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this._context = canvas._canvas.getContext('2d');\n\n    if (Konva.enableTrace) {\n      this.traceArr = [];\n\n      this._enableTrace();\n    }\n  }\n\n  fillShape(shape) {\n    if (shape.fillEnabled()) {\n      this._fill(shape);\n    }\n  }\n\n  _fill(shape) {}\n\n  strokeShape(shape) {\n    if (shape.hasStroke()) {\n      this._stroke(shape);\n    }\n  }\n\n  _stroke(shape) {}\n\n  fillStrokeShape(shape) {\n    if (shape.attrs.fillAfterStrokeEnabled) {\n      this.strokeShape(shape);\n      this.fillShape(shape);\n    } else {\n      this.fillShape(shape);\n      this.strokeShape(shape);\n    }\n  }\n\n  getTrace(relaxed, rounded) {\n    var traceArr = this.traceArr,\n        len = traceArr.length,\n        str = '',\n        n,\n        trace,\n        method,\n        args;\n\n    for (n = 0; n < len; n++) {\n      trace = traceArr[n];\n      method = trace.method;\n\n      if (method) {\n        args = trace.args;\n        str += method;\n\n        if (relaxed) {\n          str += DOUBLE_PAREN;\n        } else {\n          if (Util._isArray(args[0])) {\n            str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n          } else {\n            if (rounded) {\n              args = args.map(a => typeof a === 'number' ? Math.floor(a) : a);\n            }\n\n            str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n          }\n        }\n      } else {\n        str += trace.property;\n\n        if (!relaxed) {\n          str += EQUALS + trace.val;\n        }\n      }\n\n      str += SEMICOLON;\n    }\n\n    return str;\n  }\n\n  clearTrace() {\n    this.traceArr = [];\n  }\n\n  _trace(str) {\n    var traceArr = this.traceArr,\n        len;\n    traceArr.push(str);\n    len = traceArr.length;\n\n    if (len >= traceArrMax) {\n      traceArr.shift();\n    }\n  }\n\n  reset() {\n    var pixelRatio = this.getCanvas().getPixelRatio();\n    this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n  }\n\n  getCanvas() {\n    return this.canvas;\n  }\n\n  clear(bounds) {\n    var canvas = this.getCanvas();\n\n    if (bounds) {\n      this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n    } else {\n      this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n    }\n  }\n\n  _applyLineCap(shape) {\n    var lineCap = shape.getLineCap();\n\n    if (lineCap) {\n      this.setAttr('lineCap', lineCap);\n    }\n  }\n\n  _applyOpacity(shape) {\n    var absOpacity = shape.getAbsoluteOpacity();\n\n    if (absOpacity !== 1) {\n      this.setAttr('globalAlpha', absOpacity);\n    }\n  }\n\n  _applyLineJoin(shape) {\n    var lineJoin = shape.attrs.lineJoin;\n\n    if (lineJoin) {\n      this.setAttr('lineJoin', lineJoin);\n    }\n  }\n\n  setAttr(attr, val) {\n    this._context[attr] = val;\n  }\n\n  arc(a0, a1, a2, a3, a4, a5) {\n    this._context.arc(a0, a1, a2, a3, a4, a5);\n  }\n\n  arcTo(a0, a1, a2, a3, a4) {\n    this._context.arcTo(a0, a1, a2, a3, a4);\n  }\n\n  beginPath() {\n    this._context.beginPath();\n  }\n\n  bezierCurveTo(a0, a1, a2, a3, a4, a5) {\n    this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n  }\n\n  clearRect(a0, a1, a2, a3) {\n    this._context.clearRect(a0, a1, a2, a3);\n  }\n\n  clip() {\n    this._context.clip();\n  }\n\n  closePath() {\n    this._context.closePath();\n  }\n\n  createImageData(a0, a1) {\n    var a = arguments;\n\n    if (a.length === 2) {\n      return this._context.createImageData(a0, a1);\n    } else if (a.length === 1) {\n      return this._context.createImageData(a0);\n    }\n  }\n\n  createLinearGradient(a0, a1, a2, a3) {\n    return this._context.createLinearGradient(a0, a1, a2, a3);\n  }\n\n  createPattern(a0, a1) {\n    return this._context.createPattern(a0, a1);\n  }\n\n  createRadialGradient(a0, a1, a2, a3, a4, a5) {\n    return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n  }\n\n  drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n    var a = arguments,\n        _context = this._context;\n\n    if (a.length === 3) {\n      _context.drawImage(a0, a1, a2);\n    } else if (a.length === 5) {\n      _context.drawImage(a0, a1, a2, a3, a4);\n    } else if (a.length === 9) {\n      _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n    }\n  }\n\n  ellipse(a0, a1, a2, a3, a4, a5, a6, a7) {\n    this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n  }\n\n  isPointInPath(x, y) {\n    return this._context.isPointInPath(x, y);\n  }\n\n  fill(path2d) {\n    if (path2d) {\n      this._context.fill(path2d);\n    } else {\n      this._context.fill();\n    }\n  }\n\n  fillRect(x, y, width, height) {\n    this._context.fillRect(x, y, width, height);\n  }\n\n  strokeRect(x, y, width, height) {\n    this._context.strokeRect(x, y, width, height);\n  }\n\n  fillText(text, x, y, maxWidth) {\n    if (maxWidth) {\n      this._context.fillText(text, x, y, maxWidth);\n    } else {\n      this._context.fillText(text, x, y);\n    }\n  }\n\n  measureText(text) {\n    return this._context.measureText(text);\n  }\n\n  getImageData(a0, a1, a2, a3) {\n    return this._context.getImageData(a0, a1, a2, a3);\n  }\n\n  lineTo(a0, a1) {\n    this._context.lineTo(a0, a1);\n  }\n\n  moveTo(a0, a1) {\n    this._context.moveTo(a0, a1);\n  }\n\n  rect(a0, a1, a2, a3) {\n    this._context.rect(a0, a1, a2, a3);\n  }\n\n  putImageData(a0, a1, a2) {\n    this._context.putImageData(a0, a1, a2);\n  }\n\n  quadraticCurveTo(a0, a1, a2, a3) {\n    this._context.quadraticCurveTo(a0, a1, a2, a3);\n  }\n\n  restore() {\n    this._context.restore();\n  }\n\n  rotate(a0) {\n    this._context.rotate(a0);\n  }\n\n  save() {\n    this._context.save();\n  }\n\n  scale(a0, a1) {\n    this._context.scale(a0, a1);\n  }\n\n  setLineDash(a0) {\n    if (this._context.setLineDash) {\n      this._context.setLineDash(a0);\n    } else if ('mozDash' in this._context) {\n      this._context['mozDash'] = a0;\n    } else if ('webkitLineDash' in this._context) {\n      this._context['webkitLineDash'] = a0;\n    }\n  }\n\n  getLineDash() {\n    return this._context.getLineDash();\n  }\n\n  setTransform(a0, a1, a2, a3, a4, a5) {\n    this._context.setTransform(a0, a1, a2, a3, a4, a5);\n  }\n\n  stroke(path2d) {\n    if (path2d) {\n      this._context.stroke(path2d);\n    } else {\n      this._context.stroke();\n    }\n  }\n\n  strokeText(a0, a1, a2, a3) {\n    this._context.strokeText(a0, a1, a2, a3);\n  }\n\n  transform(a0, a1, a2, a3, a4, a5) {\n    this._context.transform(a0, a1, a2, a3, a4, a5);\n  }\n\n  translate(a0, a1) {\n    this._context.translate(a0, a1);\n  }\n\n  _enableTrace() {\n    var that = this,\n        len = CONTEXT_METHODS.length,\n        origSetter = this.setAttr,\n        n,\n        args;\n\n    var func = function (methodName) {\n      var origMethod = that[methodName],\n          ret;\n\n      that[methodName] = function () {\n        args = simplifyArray(Array.prototype.slice.call(arguments, 0));\n        ret = origMethod.apply(that, arguments);\n\n        that._trace({\n          method: methodName,\n          args: args\n        });\n\n        return ret;\n      };\n    };\n\n    for (n = 0; n < len; n++) {\n      func(CONTEXT_METHODS[n]);\n    }\n\n    that.setAttr = function () {\n      origSetter.apply(that, arguments);\n      var prop = arguments[0];\n      var val = arguments[1];\n\n      if (prop === 'shadowOffsetX' || prop === 'shadowOffsetY' || prop === 'shadowBlur') {\n        val = val / this.canvas.getPixelRatio();\n      }\n\n      that._trace({\n        property: prop,\n        val: val\n      });\n    };\n  }\n\n  _applyGlobalCompositeOperation(node) {\n    const op = node.attrs.globalCompositeOperation;\n    var def = !op || op === 'source-over';\n\n    if (!def) {\n      this.setAttr('globalCompositeOperation', op);\n    }\n  }\n\n}\nCONTEXT_PROPERTIES.forEach(function (prop) {\n  Object.defineProperty(Context.prototype, prop, {\n    get() {\n      return this._context[prop];\n    },\n\n    set(val) {\n      this._context[prop] = val;\n    }\n\n  });\n});\nexport class SceneContext extends Context {\n  _fillColor(shape) {\n    var fill = shape.fill();\n    this.setAttr('fillStyle', fill);\n\n    shape._fillFunc(this);\n  }\n\n  _fillPattern(shape) {\n    this.setAttr('fillStyle', shape._getFillPattern());\n\n    shape._fillFunc(this);\n  }\n\n  _fillLinearGradient(shape) {\n    var grd = shape._getLinearGradient();\n\n    if (grd) {\n      this.setAttr('fillStyle', grd);\n\n      shape._fillFunc(this);\n    }\n  }\n\n  _fillRadialGradient(shape) {\n    var grd = shape._getRadialGradient();\n\n    if (grd) {\n      this.setAttr('fillStyle', grd);\n\n      shape._fillFunc(this);\n    }\n  }\n\n  _fill(shape) {\n    var hasColor = shape.fill(),\n        fillPriority = shape.getFillPriority();\n\n    if (hasColor && fillPriority === 'color') {\n      this._fillColor(shape);\n\n      return;\n    }\n\n    var hasPattern = shape.getFillPatternImage();\n\n    if (hasPattern && fillPriority === 'pattern') {\n      this._fillPattern(shape);\n\n      return;\n    }\n\n    var hasLinearGradient = shape.getFillLinearGradientColorStops();\n\n    if (hasLinearGradient && fillPriority === 'linear-gradient') {\n      this._fillLinearGradient(shape);\n\n      return;\n    }\n\n    var hasRadialGradient = shape.getFillRadialGradientColorStops();\n\n    if (hasRadialGradient && fillPriority === 'radial-gradient') {\n      this._fillRadialGradient(shape);\n\n      return;\n    }\n\n    if (hasColor) {\n      this._fillColor(shape);\n    } else if (hasPattern) {\n      this._fillPattern(shape);\n    } else if (hasLinearGradient) {\n      this._fillLinearGradient(shape);\n    } else if (hasRadialGradient) {\n      this._fillRadialGradient(shape);\n    }\n  }\n\n  _strokeLinearGradient(shape) {\n    var start = shape.getStrokeLinearGradientStartPoint(),\n        end = shape.getStrokeLinearGradientEndPoint(),\n        colorStops = shape.getStrokeLinearGradientColorStops(),\n        grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n\n    if (colorStops) {\n      for (var n = 0; n < colorStops.length; n += 2) {\n        grd.addColorStop(colorStops[n], colorStops[n + 1]);\n      }\n\n      this.setAttr('strokeStyle', grd);\n    }\n  }\n\n  _stroke(shape) {\n    var dash = shape.dash(),\n        strokeScaleEnabled = shape.getStrokeScaleEnabled();\n\n    if (shape.hasStroke()) {\n      if (!strokeScaleEnabled) {\n        this.save();\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      }\n\n      this._applyLineCap(shape);\n\n      if (dash && shape.dashEnabled()) {\n        this.setLineDash(dash);\n        this.setAttr('lineDashOffset', shape.dashOffset());\n      }\n\n      this.setAttr('lineWidth', shape.strokeWidth());\n\n      if (!shape.getShadowForStrokeEnabled()) {\n        this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n      }\n\n      var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n\n      if (hasLinearGradient) {\n        this._strokeLinearGradient(shape);\n      } else {\n        this.setAttr('strokeStyle', shape.stroke());\n      }\n\n      shape._strokeFunc(this);\n\n      if (!strokeScaleEnabled) {\n        this.restore();\n      }\n    }\n  }\n\n  _applyShadow(shape) {\n    var _a, _b, _c;\n\n    var color = (_a = shape.getShadowRGBA()) !== null && _a !== void 0 ? _a : 'black',\n        blur = (_b = shape.getShadowBlur()) !== null && _b !== void 0 ? _b : 5,\n        offset = (_c = shape.getShadowOffset()) !== null && _c !== void 0 ? _c : {\n      x: 0,\n      y: 0\n    },\n        scale = shape.getAbsoluteScale(),\n        ratio = this.canvas.getPixelRatio(),\n        scaleX = scale.x * ratio,\n        scaleY = scale.y * ratio;\n    this.setAttr('shadowColor', color);\n    this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n    this.setAttr('shadowOffsetX', offset.x * scaleX);\n    this.setAttr('shadowOffsetY', offset.y * scaleY);\n  }\n\n}\nexport class HitContext extends Context {\n  _fill(shape) {\n    this.save();\n    this.setAttr('fillStyle', shape.colorKey);\n\n    shape._fillFuncHit(this);\n\n    this.restore();\n  }\n\n  strokeShape(shape) {\n    if (shape.hasHitStroke()) {\n      this._stroke(shape);\n    }\n  }\n\n  _stroke(shape) {\n    if (shape.hasHitStroke()) {\n      var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n\n      if (!strokeScaleEnabled) {\n        this.save();\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      }\n\n      this._applyLineCap(shape);\n\n      var hitStrokeWidth = shape.hitStrokeWidth();\n      var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n      this.setAttr('lineWidth', strokeWidth);\n      this.setAttr('strokeStyle', shape.colorKey);\n\n      shape._strokeFuncHit(this);\n\n      if (!strokeScaleEnabled) {\n        this.restore();\n      }\n    }\n  }\n\n}","map":{"version":3,"names":["Util","Konva","simplifyArray","arr","retArr","len","length","util","n","val","_isNumber","Math","round","_isString","push","COMMA","OPEN_PAREN","CLOSE_PAREN","OPEN_PAREN_BRACKET","CLOSE_BRACKET_PAREN","SEMICOLON","DOUBLE_PAREN","EQUALS","CONTEXT_METHODS","CONTEXT_PROPERTIES","traceArrMax","Context","constructor","canvas","_context","_canvas","getContext","enableTrace","traceArr","_enableTrace","fillShape","shape","fillEnabled","_fill","strokeShape","hasStroke","_stroke","fillStrokeShape","attrs","fillAfterStrokeEnabled","getTrace","relaxed","rounded","str","trace","method","args","_isArray","join","map","a","floor","property","clearTrace","_trace","shift","reset","pixelRatio","getCanvas","getPixelRatio","setTransform","clear","bounds","clearRect","x","y","width","height","getWidth","getHeight","_applyLineCap","lineCap","getLineCap","setAttr","_applyOpacity","absOpacity","getAbsoluteOpacity","_applyLineJoin","lineJoin","attr","arc","a0","a1","a2","a3","a4","a5","arcTo","beginPath","bezierCurveTo","clip","closePath","createImageData","arguments","createLinearGradient","createPattern","createRadialGradient","drawImage","a6","a7","a8","ellipse","isPointInPath","fill","path2d","fillRect","strokeRect","fillText","text","maxWidth","measureText","getImageData","lineTo","moveTo","rect","putImageData","quadraticCurveTo","restore","rotate","save","scale","setLineDash","getLineDash","stroke","strokeText","transform","translate","that","origSetter","func","methodName","origMethod","ret","Array","prototype","slice","call","apply","prop","_applyGlobalCompositeOperation","node","op","globalCompositeOperation","def","forEach","Object","defineProperty","get","set","SceneContext","_fillColor","_fillFunc","_fillPattern","_getFillPattern","_fillLinearGradient","grd","_getLinearGradient","_fillRadialGradient","_getRadialGradient","hasColor","fillPriority","getFillPriority","hasPattern","getFillPatternImage","hasLinearGradient","getFillLinearGradientColorStops","hasRadialGradient","getFillRadialGradientColorStops","_strokeLinearGradient","start","getStrokeLinearGradientStartPoint","end","getStrokeLinearGradientEndPoint","colorStops","getStrokeLinearGradientColorStops","addColorStop","dash","strokeScaleEnabled","getStrokeScaleEnabled","dashEnabled","dashOffset","strokeWidth","getShadowForStrokeEnabled","_strokeFunc","_applyShadow","_a","_b","_c","color","getShadowRGBA","blur","getShadowBlur","offset","getShadowOffset","getAbsoluteScale","ratio","scaleX","scaleY","min","abs","HitContext","colorKey","_fillFuncHit","hasHitStroke","hitStrokeWidth","_strokeFuncHit"],"sources":["C:/traffic_sim/traffic-sim/sim_ui/node_modules/konva/lib/Context.js"],"sourcesContent":["import { Util } from './Util.js';\nimport { Konva } from './Global.js';\nfunction simplifyArray(arr) {\n    var retArr = [], len = arr.length, util = Util, n, val;\n    for (n = 0; n < len; n++) {\n        val = arr[n];\n        if (util._isNumber(val)) {\n            val = Math.round(val * 1000) / 1000;\n        }\n        else if (!util._isString(val)) {\n            val = val + '';\n        }\n        retArr.push(val);\n    }\n    return retArr;\n}\nvar COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate',\n];\nvar CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled',\n];\nconst traceArrMax = 100;\nexport class Context {\n    constructor(canvas) {\n        this.canvas = canvas;\n        this._context = canvas._canvas.getContext('2d');\n        if (Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    fillShape(shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    }\n    _fill(shape) {\n    }\n    strokeShape(shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n    }\n    fillStrokeShape(shape) {\n        if (shape.attrs.fillAfterStrokeEnabled) {\n            this.strokeShape(shape);\n            this.fillShape(shape);\n        }\n        else {\n            this.fillShape(shape);\n            this.strokeShape(shape);\n        }\n    }\n    getTrace(relaxed, rounded) {\n        var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        if (rounded) {\n                            args = args.map((a) => typeof a === 'number' ? Math.floor(a) : a);\n                        }\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    }\n    clearTrace() {\n        this.traceArr = [];\n    }\n    _trace(str) {\n        var traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    }\n    reset() {\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    clear(bounds) {\n        var canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    }\n    _applyLineCap(shape) {\n        var lineCap = shape.getLineCap();\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    }\n    _applyOpacity(shape) {\n        var absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    }\n    _applyLineJoin(shape) {\n        var lineJoin = shape.attrs.lineJoin;\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    }\n    setAttr(attr, val) {\n        this._context[attr] = val;\n    }\n    arc(a0, a1, a2, a3, a4, a5) {\n        this._context.arc(a0, a1, a2, a3, a4, a5);\n    }\n    arcTo(a0, a1, a2, a3, a4) {\n        this._context.arcTo(a0, a1, a2, a3, a4);\n    }\n    beginPath() {\n        this._context.beginPath();\n    }\n    bezierCurveTo(a0, a1, a2, a3, a4, a5) {\n        this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n    }\n    clearRect(a0, a1, a2, a3) {\n        this._context.clearRect(a0, a1, a2, a3);\n    }\n    clip() {\n        this._context.clip();\n    }\n    closePath() {\n        this._context.closePath();\n    }\n    createImageData(a0, a1) {\n        var a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(a0, a1);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(a0);\n        }\n    }\n    createLinearGradient(a0, a1, a2, a3) {\n        return this._context.createLinearGradient(a0, a1, a2, a3);\n    }\n    createPattern(a0, a1) {\n        return this._context.createPattern(a0, a1);\n    }\n    createRadialGradient(a0, a1, a2, a3, a4, a5) {\n        return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n    }\n    drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        var a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(a0, a1, a2);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(a0, a1, a2, a3, a4);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n        }\n    }\n    ellipse(a0, a1, a2, a3, a4, a5, a6, a7) {\n        this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    isPointInPath(x, y) {\n        return this._context.isPointInPath(x, y);\n    }\n    fill(path2d) {\n        if (path2d) {\n            this._context.fill(path2d);\n        }\n        else {\n            this._context.fill();\n        }\n    }\n    fillRect(x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    }\n    strokeRect(x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    }\n    fillText(text, x, y, maxWidth) {\n        if (maxWidth) {\n            this._context.fillText(text, x, y, maxWidth);\n        }\n        else {\n            this._context.fillText(text, x, y);\n        }\n    }\n    measureText(text) {\n        return this._context.measureText(text);\n    }\n    getImageData(a0, a1, a2, a3) {\n        return this._context.getImageData(a0, a1, a2, a3);\n    }\n    lineTo(a0, a1) {\n        this._context.lineTo(a0, a1);\n    }\n    moveTo(a0, a1) {\n        this._context.moveTo(a0, a1);\n    }\n    rect(a0, a1, a2, a3) {\n        this._context.rect(a0, a1, a2, a3);\n    }\n    putImageData(a0, a1, a2) {\n        this._context.putImageData(a0, a1, a2);\n    }\n    quadraticCurveTo(a0, a1, a2, a3) {\n        this._context.quadraticCurveTo(a0, a1, a2, a3);\n    }\n    restore() {\n        this._context.restore();\n    }\n    rotate(a0) {\n        this._context.rotate(a0);\n    }\n    save() {\n        this._context.save();\n    }\n    scale(a0, a1) {\n        this._context.scale(a0, a1);\n    }\n    setLineDash(a0) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(a0);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = a0;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = a0;\n        }\n    }\n    getLineDash() {\n        return this._context.getLineDash();\n    }\n    setTransform(a0, a1, a2, a3, a4, a5) {\n        this._context.setTransform(a0, a1, a2, a3, a4, a5);\n    }\n    stroke(path2d) {\n        if (path2d) {\n            this._context.stroke(path2d);\n        }\n        else {\n            this._context.stroke();\n        }\n    }\n    strokeText(a0, a1, a2, a3) {\n        this._context.strokeText(a0, a1, a2, a3);\n    }\n    transform(a0, a1, a2, a3, a4, a5) {\n        this._context.transform(a0, a1, a2, a3, a4, a5);\n    }\n    translate(a0, a1) {\n        this._context.translate(a0, a1);\n    }\n    _enableTrace() {\n        var that = this, len = CONTEXT_METHODS.length, origSetter = this.setAttr, n, args;\n        var func = function (methodName) {\n            var origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args,\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            var prop = arguments[0];\n            var val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val,\n            });\n        };\n    }\n    _applyGlobalCompositeOperation(node) {\n        const op = node.attrs.globalCompositeOperation;\n        var def = !op || op === 'source-over';\n        if (!def) {\n            this.setAttr('globalCompositeOperation', op);\n        }\n    }\n}\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get() {\n            return this._context[prop];\n        },\n        set(val) {\n            this._context[prop] = val;\n        },\n    });\n});\nexport class SceneContext extends Context {\n    _fillColor(shape) {\n        var fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    }\n    _fillPattern(shape) {\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    }\n    _fillLinearGradient(shape) {\n        var grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fillRadialGradient(shape) {\n        var grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fill(shape) {\n        var hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        var hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        var hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        var hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    }\n    _strokeLinearGradient(shape) {\n        var start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    }\n    _stroke(shape) {\n        var dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n    _applyShadow(shape) {\n        var _a, _b, _c;\n        var color = (_a = shape.getShadowRGBA()) !== null && _a !== void 0 ? _a : 'black', blur = (_b = shape.getShadowBlur()) !== null && _b !== void 0 ? _b : 5, offset = (_c = shape.getShadowOffset()) !== null && _c !== void 0 ? _c : {\n            x: 0,\n            y: 0,\n        }, scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    }\n}\nexport class HitContext extends Context {\n    _fill(shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    }\n    strokeShape(shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n        if (shape.hasHitStroke()) {\n            var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            var hitStrokeWidth = shape.hitStrokeWidth();\n            var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}