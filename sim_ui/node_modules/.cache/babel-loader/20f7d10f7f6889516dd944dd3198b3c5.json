{"ast":null,"code":"import Konva from 'konva/lib/Core';\nimport { applyNodeProps, updatePicture, EVENTS_NAMESPACE } from './makeUpdates';\nexport { unstable_now as now, unstable_IdlePriority as idlePriority, unstable_runWithPriority as run } from 'scheduler';\nimport { DefaultEventPriority } from 'react-reconciler/constants';\nconst NO_CONTEXT = {};\nconst UPDATE_SIGNAL = {}; // for react-spring capability\n\nKonva.Node.prototype._applyProps = applyNodeProps;\nexport function appendInitialChild(parentInstance, child) {\n  if (typeof child === 'string') {\n    // Noop for string children of Text (eg <Text>foo</Text>)\n    console.error(`Do not use plain text as child of Konva.Node. You are using text: ${child}`);\n    return;\n  }\n\n  parentInstance.add(child);\n  updatePicture(parentInstance);\n}\nexport function createInstance(type, props, internalInstanceHandle) {\n  let NodeClass = Konva[type];\n\n  if (!NodeClass) {\n    console.error(`Konva has no node with the type ${type}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: \"import \"konva/lib/shapes/${type}\"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`);\n    NodeClass = Konva.Group;\n  } // we need to split props into events and non events\n  // we we can pass non events into constructor directly\n  // that way the performance should be better\n  // we we apply change \"applyNodeProps\"\n  // then it will trigger change events on first run\n  // but we don't need them!\n\n\n  const propsWithoutEvents = {};\n  const propsWithOnlyEvents = {};\n\n  for (var key in props) {\n    var isEvent = key.slice(0, 2) === 'on';\n\n    if (isEvent) {\n      propsWithOnlyEvents[key] = props[key];\n    } else {\n      propsWithoutEvents[key] = props[key];\n    }\n  }\n\n  const instance = new NodeClass(propsWithoutEvents);\n  applyNodeProps(instance, propsWithOnlyEvents);\n  return instance;\n}\nexport function createTextInstance(text, rootContainerInstance, internalInstanceHandle) {\n  console.error(`Text components are not supported for now in ReactKonva. Your text is: \"${text}\"`);\n}\nexport function finalizeInitialChildren(domElement, type, props) {\n  return false;\n}\nexport function getPublicInstance(instance) {\n  return instance;\n}\nexport function prepareForCommit() {\n  return null;\n}\nexport function preparePortalMount() {\n  return null;\n}\nexport function prepareUpdate(domElement, type, oldProps, newProps) {\n  return UPDATE_SIGNAL;\n}\nexport function resetAfterCommit() {// Noop\n}\nexport function resetTextContent(domElement) {// Noop\n}\nexport function shouldDeprioritizeSubtree(type, props) {\n  return false;\n}\nexport function getRootHostContext() {\n  return NO_CONTEXT;\n}\nexport function getChildHostContext() {\n  return NO_CONTEXT;\n}\nexport const scheduleTimeout = setTimeout;\nexport const cancelTimeout = clearTimeout;\nexport const noTimeout = -1; // export const schedulePassiveEffects = scheduleDeferredCallback;\n// export const cancelPassiveEffects = cancelDeferredCallback;\n\nexport function shouldSetTextContent(type, props) {\n  return false;\n} // The Konva renderer is secondary to the React DOM renderer.\n\nexport const isPrimaryRenderer = false;\nexport const warnsIfNotActing = true;\nexport const supportsMutation = true;\nexport function appendChild(parentInstance, child) {\n  if (child.parent === parentInstance) {\n    child.moveToTop();\n  } else {\n    parentInstance.add(child);\n  }\n\n  updatePicture(parentInstance);\n}\nexport function appendChildToContainer(parentInstance, child) {\n  if (child.parent === parentInstance) {\n    child.moveToTop();\n  } else {\n    parentInstance.add(child);\n  }\n\n  updatePicture(parentInstance);\n}\nexport function insertBefore(parentInstance, child, beforeChild) {\n  // child._remove() will not stop dragging\n  // but child.remove() will stop it, but we don't need it\n  // removing will reset zIndexes\n  child._remove();\n\n  parentInstance.add(child);\n  child.setZIndex(beforeChild.getZIndex());\n  updatePicture(parentInstance);\n}\nexport function insertInContainerBefore(parentInstance, child, beforeChild) {\n  insertBefore(parentInstance, child, beforeChild);\n}\nexport function removeChild(parentInstance, child) {\n  child.destroy();\n  child.off(EVENTS_NAMESPACE);\n  updatePicture(parentInstance);\n}\nexport function removeChildFromContainer(parentInstance, child) {\n  child.destroy();\n  child.off(EVENTS_NAMESPACE);\n  updatePicture(parentInstance);\n}\nexport function commitTextUpdate(textInstance, oldText, newText) {\n  console.error(`Text components are not yet supported in ReactKonva. You text is: \"${newText}\"`);\n}\nexport function commitMount(instance, type, newProps) {// Noop\n}\nexport function commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n  applyNodeProps(instance, newProps, oldProps);\n}\nexport function hideInstance(instance) {\n  instance.hide();\n  updatePicture(instance);\n}\nexport function hideTextInstance(textInstance) {// Noop\n}\nexport function unhideInstance(instance, props) {\n  if (props.visible == null || props.visible) {\n    instance.show();\n  }\n}\nexport function unhideTextInstance(textInstance, text) {// Noop\n}\nexport function clearContainer(container) {// Noop\n}\nexport function detachDeletedInstance() {}\nexport const getCurrentEventPriority = () => DefaultEventPriority;","map":{"version":3,"names":["Konva","applyNodeProps","updatePicture","EVENTS_NAMESPACE","unstable_now","now","unstable_IdlePriority","idlePriority","unstable_runWithPriority","run","DefaultEventPriority","NO_CONTEXT","UPDATE_SIGNAL","Node","prototype","_applyProps","appendInitialChild","parentInstance","child","console","error","add","createInstance","type","props","internalInstanceHandle","NodeClass","Group","propsWithoutEvents","propsWithOnlyEvents","key","isEvent","slice","instance","createTextInstance","text","rootContainerInstance","finalizeInitialChildren","domElement","getPublicInstance","prepareForCommit","preparePortalMount","prepareUpdate","oldProps","newProps","resetAfterCommit","resetTextContent","shouldDeprioritizeSubtree","getRootHostContext","getChildHostContext","scheduleTimeout","setTimeout","cancelTimeout","clearTimeout","noTimeout","shouldSetTextContent","isPrimaryRenderer","warnsIfNotActing","supportsMutation","appendChild","parent","moveToTop","appendChildToContainer","insertBefore","beforeChild","_remove","setZIndex","getZIndex","insertInContainerBefore","removeChild","destroy","off","removeChildFromContainer","commitTextUpdate","textInstance","oldText","newText","commitMount","commitUpdate","updatePayload","hideInstance","hide","hideTextInstance","unhideInstance","visible","show","unhideTextInstance","clearContainer","container","detachDeletedInstance","getCurrentEventPriority"],"sources":["C:/traffic_sim/traffic-sim/sim_ui/node_modules/react-konva/es/ReactKonvaHostConfig.js"],"sourcesContent":["import Konva from 'konva/lib/Core';\nimport { applyNodeProps, updatePicture, EVENTS_NAMESPACE } from './makeUpdates';\nexport { unstable_now as now, unstable_IdlePriority as idlePriority, unstable_runWithPriority as run, } from 'scheduler';\nimport { DefaultEventPriority } from 'react-reconciler/constants';\nconst NO_CONTEXT = {};\nconst UPDATE_SIGNAL = {};\n// for react-spring capability\nKonva.Node.prototype._applyProps = applyNodeProps;\nexport function appendInitialChild(parentInstance, child) {\n    if (typeof child === 'string') {\n        // Noop for string children of Text (eg <Text>foo</Text>)\n        console.error(`Do not use plain text as child of Konva.Node. You are using text: ${child}`);\n        return;\n    }\n    parentInstance.add(child);\n    updatePicture(parentInstance);\n}\nexport function createInstance(type, props, internalInstanceHandle) {\n    let NodeClass = Konva[type];\n    if (!NodeClass) {\n        console.error(`Konva has no node with the type ${type}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: \"import \"konva/lib/shapes/${type}\"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`);\n        NodeClass = Konva.Group;\n    }\n    // we need to split props into events and non events\n    // we we can pass non events into constructor directly\n    // that way the performance should be better\n    // we we apply change \"applyNodeProps\"\n    // then it will trigger change events on first run\n    // but we don't need them!\n    const propsWithoutEvents = {};\n    const propsWithOnlyEvents = {};\n    for (var key in props) {\n        var isEvent = key.slice(0, 2) === 'on';\n        if (isEvent) {\n            propsWithOnlyEvents[key] = props[key];\n        }\n        else {\n            propsWithoutEvents[key] = props[key];\n        }\n    }\n    const instance = new NodeClass(propsWithoutEvents);\n    applyNodeProps(instance, propsWithOnlyEvents);\n    return instance;\n}\nexport function createTextInstance(text, rootContainerInstance, internalInstanceHandle) {\n    console.error(`Text components are not supported for now in ReactKonva. Your text is: \"${text}\"`);\n}\nexport function finalizeInitialChildren(domElement, type, props) {\n    return false;\n}\nexport function getPublicInstance(instance) {\n    return instance;\n}\nexport function prepareForCommit() {\n    return null;\n}\nexport function preparePortalMount() {\n    return null;\n}\nexport function prepareUpdate(domElement, type, oldProps, newProps) {\n    return UPDATE_SIGNAL;\n}\nexport function resetAfterCommit() {\n    // Noop\n}\nexport function resetTextContent(domElement) {\n    // Noop\n}\nexport function shouldDeprioritizeSubtree(type, props) {\n    return false;\n}\nexport function getRootHostContext() {\n    return NO_CONTEXT;\n}\nexport function getChildHostContext() {\n    return NO_CONTEXT;\n}\nexport const scheduleTimeout = setTimeout;\nexport const cancelTimeout = clearTimeout;\nexport const noTimeout = -1;\n// export const schedulePassiveEffects = scheduleDeferredCallback;\n// export const cancelPassiveEffects = cancelDeferredCallback;\nexport function shouldSetTextContent(type, props) {\n    return false;\n}\n// The Konva renderer is secondary to the React DOM renderer.\nexport const isPrimaryRenderer = false;\nexport const warnsIfNotActing = true;\nexport const supportsMutation = true;\nexport function appendChild(parentInstance, child) {\n    if (child.parent === parentInstance) {\n        child.moveToTop();\n    }\n    else {\n        parentInstance.add(child);\n    }\n    updatePicture(parentInstance);\n}\nexport function appendChildToContainer(parentInstance, child) {\n    if (child.parent === parentInstance) {\n        child.moveToTop();\n    }\n    else {\n        parentInstance.add(child);\n    }\n    updatePicture(parentInstance);\n}\nexport function insertBefore(parentInstance, child, beforeChild) {\n    // child._remove() will not stop dragging\n    // but child.remove() will stop it, but we don't need it\n    // removing will reset zIndexes\n    child._remove();\n    parentInstance.add(child);\n    child.setZIndex(beforeChild.getZIndex());\n    updatePicture(parentInstance);\n}\nexport function insertInContainerBefore(parentInstance, child, beforeChild) {\n    insertBefore(parentInstance, child, beforeChild);\n}\nexport function removeChild(parentInstance, child) {\n    child.destroy();\n    child.off(EVENTS_NAMESPACE);\n    updatePicture(parentInstance);\n}\nexport function removeChildFromContainer(parentInstance, child) {\n    child.destroy();\n    child.off(EVENTS_NAMESPACE);\n    updatePicture(parentInstance);\n}\nexport function commitTextUpdate(textInstance, oldText, newText) {\n    console.error(`Text components are not yet supported in ReactKonva. You text is: \"${newText}\"`);\n}\nexport function commitMount(instance, type, newProps) {\n    // Noop\n}\nexport function commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n    applyNodeProps(instance, newProps, oldProps);\n}\nexport function hideInstance(instance) {\n    instance.hide();\n    updatePicture(instance);\n}\nexport function hideTextInstance(textInstance) {\n    // Noop\n}\nexport function unhideInstance(instance, props) {\n    if (props.visible == null || props.visible) {\n        instance.show();\n    }\n}\nexport function unhideTextInstance(textInstance, text) {\n    // Noop\n}\nexport function clearContainer(container) {\n    // Noop\n}\nexport function detachDeletedInstance() { }\nexport const getCurrentEventPriority = () => DefaultEventPriority;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}