{"ast":null,"code":"import { Util } from './Util.js';\nimport { Container } from './Container.js';\nimport { Node } from './Node.js';\nimport { Factory } from './Factory.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { getBooleanValidator } from './Validators.js';\nimport { shapes } from './Shape.js';\nimport { _registerNode } from './Global.js';\nvar HASH = '#',\n    BEFORE_DRAW = 'beforeDraw',\n    DRAW = 'draw',\n    INTERSECTION_OFFSETS = [{\n  x: 0,\n  y: 0\n}, {\n  x: -1,\n  y: -1\n}, {\n  x: 1,\n  y: -1\n}, {\n  x: 1,\n  y: 1\n}, {\n  x: -1,\n  y: 1\n}],\n    INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\nexport class Layer extends Container {\n  constructor(config) {\n    super(config);\n    this.canvas = new SceneCanvas();\n    this.hitCanvas = new HitCanvas({\n      pixelRatio: 1\n    });\n    this._waitingForDraw = false;\n    this.on('visibleChange.konva', this._checkVisibility);\n\n    this._checkVisibility();\n\n    this.on('imageSmoothingEnabledChange.konva', this._setSmoothEnabled);\n\n    this._setSmoothEnabled();\n  }\n\n  createPNGStream() {\n    const c = this.canvas._canvas;\n    return c.createPNGStream();\n  }\n\n  getCanvas() {\n    return this.canvas;\n  }\n\n  getNativeCanvasElement() {\n    return this.canvas._canvas;\n  }\n\n  getHitCanvas() {\n    return this.hitCanvas;\n  }\n\n  getContext() {\n    return this.getCanvas().getContext();\n  }\n\n  clear(bounds) {\n    this.getContext().clear(bounds);\n    this.getHitCanvas().getContext().clear(bounds);\n    return this;\n  }\n\n  setZIndex(index) {\n    super.setZIndex(index);\n    var stage = this.getStage();\n\n    if (stage && stage.content) {\n      stage.content.removeChild(this.getNativeCanvasElement());\n\n      if (index < stage.children.length - 1) {\n        stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[index + 1].getCanvas()._canvas);\n      } else {\n        stage.content.appendChild(this.getNativeCanvasElement());\n      }\n    }\n\n    return this;\n  }\n\n  moveToTop() {\n    Node.prototype.moveToTop.call(this);\n    var stage = this.getStage();\n\n    if (stage && stage.content) {\n      stage.content.removeChild(this.getNativeCanvasElement());\n      stage.content.appendChild(this.getNativeCanvasElement());\n    }\n\n    return true;\n  }\n\n  moveUp() {\n    var moved = Node.prototype.moveUp.call(this);\n\n    if (!moved) {\n      return false;\n    }\n\n    var stage = this.getStage();\n\n    if (!stage || !stage.content) {\n      return false;\n    }\n\n    stage.content.removeChild(this.getNativeCanvasElement());\n\n    if (this.index < stage.children.length - 1) {\n      stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[this.index + 1].getCanvas()._canvas);\n    } else {\n      stage.content.appendChild(this.getNativeCanvasElement());\n    }\n\n    return true;\n  }\n\n  moveDown() {\n    if (Node.prototype.moveDown.call(this)) {\n      var stage = this.getStage();\n\n      if (stage) {\n        var children = stage.children;\n\n        if (stage.content) {\n          stage.content.removeChild(this.getNativeCanvasElement());\n          stage.content.insertBefore(this.getNativeCanvasElement(), children[this.index + 1].getCanvas()._canvas);\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  moveToBottom() {\n    if (Node.prototype.moveToBottom.call(this)) {\n      var stage = this.getStage();\n\n      if (stage) {\n        var children = stage.children;\n\n        if (stage.content) {\n          stage.content.removeChild(this.getNativeCanvasElement());\n          stage.content.insertBefore(this.getNativeCanvasElement(), children[1].getCanvas()._canvas);\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  getLayer() {\n    return this;\n  }\n\n  remove() {\n    var _canvas = this.getNativeCanvasElement();\n\n    Node.prototype.remove.call(this);\n\n    if (_canvas && _canvas.parentNode && Util._isInDocument(_canvas)) {\n      _canvas.parentNode.removeChild(_canvas);\n    }\n\n    return this;\n  }\n\n  getStage() {\n    return this.parent;\n  }\n\n  setSize(_ref) {\n    let {\n      width,\n      height\n    } = _ref;\n    this.canvas.setSize(width, height);\n    this.hitCanvas.setSize(width, height);\n\n    this._setSmoothEnabled();\n\n    return this;\n  }\n\n  _validateAdd(child) {\n    var type = child.getType();\n\n    if (type !== 'Group' && type !== 'Shape') {\n      Util.throw('You may only add groups and shapes to a layer.');\n    }\n  }\n\n  _toKonvaCanvas(config) {\n    config = config || {};\n    config.width = config.width || this.getWidth();\n    config.height = config.height || this.getHeight();\n    config.x = config.x !== undefined ? config.x : this.x();\n    config.y = config.y !== undefined ? config.y : this.y();\n    return Node.prototype._toKonvaCanvas.call(this, config);\n  }\n\n  _checkVisibility() {\n    const visible = this.visible();\n\n    if (visible) {\n      this.canvas._canvas.style.display = 'block';\n    } else {\n      this.canvas._canvas.style.display = 'none';\n    }\n  }\n\n  _setSmoothEnabled() {\n    this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();\n  }\n\n  getWidth() {\n    if (this.parent) {\n      return this.parent.width();\n    }\n  }\n\n  setWidth() {\n    Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n  }\n\n  getHeight() {\n    if (this.parent) {\n      return this.parent.height();\n    }\n  }\n\n  setHeight() {\n    Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n  }\n\n  batchDraw() {\n    if (!this._waitingForDraw) {\n      this._waitingForDraw = true;\n      Util.requestAnimFrame(() => {\n        this.draw();\n        this._waitingForDraw = false;\n      });\n    }\n\n    return this;\n  }\n\n  getIntersection(pos) {\n    if (!this.isListening() || !this.isVisible()) {\n      return null;\n    }\n\n    var spiralSearchDistance = 1;\n    var continueSearch = false;\n\n    while (true) {\n      for (let i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n        const intersectionOffset = INTERSECTION_OFFSETS[i];\n\n        const obj = this._getIntersection({\n          x: pos.x + intersectionOffset.x * spiralSearchDistance,\n          y: pos.y + intersectionOffset.y * spiralSearchDistance\n        });\n\n        const shape = obj.shape;\n\n        if (shape) {\n          return shape;\n        }\n\n        continueSearch = !!obj.antialiased;\n\n        if (!obj.antialiased) {\n          break;\n        }\n      }\n\n      if (continueSearch) {\n        spiralSearchDistance += 1;\n      } else {\n        return null;\n      }\n    }\n  }\n\n  _getIntersection(pos) {\n    const ratio = this.hitCanvas.pixelRatio;\n    const p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data;\n    const p3 = p[3];\n\n    if (p3 === 255) {\n      const colorKey = Util._rgbToHex(p[0], p[1], p[2]);\n\n      const shape = shapes[HASH + colorKey];\n\n      if (shape) {\n        return {\n          shape: shape\n        };\n      }\n\n      return {\n        antialiased: true\n      };\n    } else if (p3 > 0) {\n      return {\n        antialiased: true\n      };\n    }\n\n    return {};\n  }\n\n  drawScene(can, top) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.getCanvas();\n\n    this._fire(BEFORE_DRAW, {\n      node: this\n    });\n\n    if (this.clearBeforeDraw()) {\n      canvas.getContext().clear();\n    }\n\n    Container.prototype.drawScene.call(this, canvas, top);\n\n    this._fire(DRAW, {\n      node: this\n    });\n\n    return this;\n  }\n\n  drawHit(can, top) {\n    var layer = this.getLayer(),\n        canvas = can || layer && layer.hitCanvas;\n\n    if (layer && layer.clearBeforeDraw()) {\n      layer.getHitCanvas().getContext().clear();\n    }\n\n    Container.prototype.drawHit.call(this, canvas, top);\n    return this;\n  }\n\n  enableHitGraph() {\n    this.hitGraphEnabled(true);\n    return this;\n  }\n\n  disableHitGraph() {\n    this.hitGraphEnabled(false);\n    return this;\n  }\n\n  setHitGraphEnabled(val) {\n    Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n    this.listening(val);\n  }\n\n  getHitGraphEnabled(val) {\n    Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n    return this.listening();\n  }\n\n  toggleHitCanvas() {\n    if (!this.parent || !this.parent['content']) {\n      return;\n    }\n\n    var parent = this.parent;\n    var added = !!this.hitCanvas._canvas.parentNode;\n\n    if (added) {\n      parent.content.removeChild(this.hitCanvas._canvas);\n    } else {\n      parent.content.appendChild(this.hitCanvas._canvas);\n    }\n  }\n\n}\nLayer.prototype.nodeType = 'Layer';\n\n_registerNode(Layer);\n\nFactory.addGetterSetter(Layer, 'imageSmoothingEnabled', true);\nFactory.addGetterSetter(Layer, 'clearBeforeDraw', true);\nFactory.addGetterSetter(Layer, 'hitGraphEnabled', true, getBooleanValidator());","map":{"version":3,"names":["Util","Container","Node","Factory","SceneCanvas","HitCanvas","getBooleanValidator","shapes","_registerNode","HASH","BEFORE_DRAW","DRAW","INTERSECTION_OFFSETS","x","y","INTERSECTION_OFFSETS_LEN","length","Layer","constructor","config","canvas","hitCanvas","pixelRatio","_waitingForDraw","on","_checkVisibility","_setSmoothEnabled","createPNGStream","c","_canvas","getCanvas","getNativeCanvasElement","getHitCanvas","getContext","clear","bounds","setZIndex","index","stage","getStage","content","removeChild","children","insertBefore","appendChild","moveToTop","prototype","call","moveUp","moved","moveDown","moveToBottom","getLayer","remove","parentNode","_isInDocument","parent","setSize","width","height","_validateAdd","child","type","getType","throw","_toKonvaCanvas","getWidth","getHeight","undefined","visible","style","display","_context","imageSmoothingEnabled","setWidth","warn","setHeight","batchDraw","requestAnimFrame","draw","getIntersection","pos","isListening","isVisible","spiralSearchDistance","continueSearch","i","intersectionOffset","obj","_getIntersection","shape","antialiased","ratio","p","context","getImageData","Math","round","data","p3","colorKey","_rgbToHex","drawScene","can","top","layer","_fire","node","clearBeforeDraw","drawHit","enableHitGraph","hitGraphEnabled","disableHitGraph","setHitGraphEnabled","val","listening","getHitGraphEnabled","toggleHitCanvas","added","nodeType","addGetterSetter"],"sources":["C:/traffic_sim/traffic-sim/sim_ui/node_modules/konva/lib/Layer.js"],"sourcesContent":["import { Util } from './Util.js';\nimport { Container } from './Container.js';\nimport { Node } from './Node.js';\nimport { Factory } from './Factory.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { getBooleanValidator } from './Validators.js';\nimport { shapes } from './Shape.js';\nimport { _registerNode } from './Global.js';\nvar HASH = '#', BEFORE_DRAW = 'beforeDraw', DRAW = 'draw', INTERSECTION_OFFSETS = [\n    { x: 0, y: 0 },\n    { x: -1, y: -1 },\n    { x: 1, y: -1 },\n    { x: 1, y: 1 },\n    { x: -1, y: 1 },\n], INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\nexport class Layer extends Container {\n    constructor(config) {\n        super(config);\n        this.canvas = new SceneCanvas();\n        this.hitCanvas = new HitCanvas({\n            pixelRatio: 1,\n        });\n        this._waitingForDraw = false;\n        this.on('visibleChange.konva', this._checkVisibility);\n        this._checkVisibility();\n        this.on('imageSmoothingEnabledChange.konva', this._setSmoothEnabled);\n        this._setSmoothEnabled();\n    }\n    createPNGStream() {\n        const c = this.canvas._canvas;\n        return c.createPNGStream();\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    getNativeCanvasElement() {\n        return this.canvas._canvas;\n    }\n    getHitCanvas() {\n        return this.hitCanvas;\n    }\n    getContext() {\n        return this.getCanvas().getContext();\n    }\n    clear(bounds) {\n        this.getContext().clear(bounds);\n        this.getHitCanvas().getContext().clear(bounds);\n        return this;\n    }\n    setZIndex(index) {\n        super.setZIndex(index);\n        var stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            if (index < stage.children.length - 1) {\n                stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[index + 1].getCanvas()._canvas);\n            }\n            else {\n                stage.content.appendChild(this.getNativeCanvasElement());\n            }\n        }\n        return this;\n    }\n    moveToTop() {\n        Node.prototype.moveToTop.call(this);\n        var stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveUp() {\n        var moved = Node.prototype.moveUp.call(this);\n        if (!moved) {\n            return false;\n        }\n        var stage = this.getStage();\n        if (!stage || !stage.content) {\n            return false;\n        }\n        stage.content.removeChild(this.getNativeCanvasElement());\n        if (this.index < stage.children.length - 1) {\n            stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[this.index + 1].getCanvas()._canvas);\n        }\n        else {\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveDown() {\n        if (Node.prototype.moveDown.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[this.index + 1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (Node.prototype.moveToBottom.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    getLayer() {\n        return this;\n    }\n    remove() {\n        var _canvas = this.getNativeCanvasElement();\n        Node.prototype.remove.call(this);\n        if (_canvas && _canvas.parentNode && Util._isInDocument(_canvas)) {\n            _canvas.parentNode.removeChild(_canvas);\n        }\n        return this;\n    }\n    getStage() {\n        return this.parent;\n    }\n    setSize({ width, height }) {\n        this.canvas.setSize(width, height);\n        this.hitCanvas.setSize(width, height);\n        this._setSmoothEnabled();\n        return this;\n    }\n    _validateAdd(child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util.throw('You may only add groups and shapes to a layer.');\n        }\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        config.width = config.width || this.getWidth();\n        config.height = config.height || this.getHeight();\n        config.x = config.x !== undefined ? config.x : this.x();\n        config.y = config.y !== undefined ? config.y : this.y();\n        return Node.prototype._toKonvaCanvas.call(this, config);\n    }\n    _checkVisibility() {\n        const visible = this.visible();\n        if (visible) {\n            this.canvas._canvas.style.display = 'block';\n        }\n        else {\n            this.canvas._canvas.style.display = 'none';\n        }\n    }\n    _setSmoothEnabled() {\n        this.getContext()._context.imageSmoothingEnabled =\n            this.imageSmoothingEnabled();\n    }\n    getWidth() {\n        if (this.parent) {\n            return this.parent.width();\n        }\n    }\n    setWidth() {\n        Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n    }\n    getHeight() {\n        if (this.parent) {\n            return this.parent.height();\n        }\n    }\n    setHeight() {\n        Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n    }\n    batchDraw() {\n        if (!this._waitingForDraw) {\n            this._waitingForDraw = true;\n            Util.requestAnimFrame(() => {\n                this.draw();\n                this._waitingForDraw = false;\n            });\n        }\n        return this;\n    }\n    getIntersection(pos) {\n        if (!this.isListening() || !this.isVisible()) {\n            return null;\n        }\n        var spiralSearchDistance = 1;\n        var continueSearch = false;\n        while (true) {\n            for (let i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n                const intersectionOffset = INTERSECTION_OFFSETS[i];\n                const obj = this._getIntersection({\n                    x: pos.x + intersectionOffset.x * spiralSearchDistance,\n                    y: pos.y + intersectionOffset.y * spiralSearchDistance,\n                });\n                const shape = obj.shape;\n                if (shape) {\n                    return shape;\n                }\n                continueSearch = !!obj.antialiased;\n                if (!obj.antialiased) {\n                    break;\n                }\n            }\n            if (continueSearch) {\n                spiralSearchDistance += 1;\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    _getIntersection(pos) {\n        const ratio = this.hitCanvas.pixelRatio;\n        const p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data;\n        const p3 = p[3];\n        if (p3 === 255) {\n            const colorKey = Util._rgbToHex(p[0], p[1], p[2]);\n            const shape = shapes[HASH + colorKey];\n            if (shape) {\n                return {\n                    shape: shape,\n                };\n            }\n            return {\n                antialiased: true,\n            };\n        }\n        else if (p3 > 0) {\n            return {\n                antialiased: true,\n            };\n        }\n        return {};\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        this._fire(BEFORE_DRAW, {\n            node: this,\n        });\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        Container.prototype.drawScene.call(this, canvas, top);\n        this._fire(DRAW, {\n            node: this,\n        });\n        return this;\n    }\n    drawHit(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas);\n        if (layer && layer.clearBeforeDraw()) {\n            layer.getHitCanvas().getContext().clear();\n        }\n        Container.prototype.drawHit.call(this, canvas, top);\n        return this;\n    }\n    enableHitGraph() {\n        this.hitGraphEnabled(true);\n        return this;\n    }\n    disableHitGraph() {\n        this.hitGraphEnabled(false);\n        return this;\n    }\n    setHitGraphEnabled(val) {\n        Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        this.listening(val);\n    }\n    getHitGraphEnabled(val) {\n        Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        return this.listening();\n    }\n    toggleHitCanvas() {\n        if (!this.parent || !this.parent['content']) {\n            return;\n        }\n        var parent = this.parent;\n        var added = !!this.hitCanvas._canvas.parentNode;\n        if (added) {\n            parent.content.removeChild(this.hitCanvas._canvas);\n        }\n        else {\n            parent.content.appendChild(this.hitCanvas._canvas);\n        }\n    }\n}\nLayer.prototype.nodeType = 'Layer';\n_registerNode(Layer);\nFactory.addGetterSetter(Layer, 'imageSmoothingEnabled', true);\nFactory.addGetterSetter(Layer, 'clearBeforeDraw', true);\nFactory.addGetterSetter(Layer, 'hitGraphEnabled', true, getBooleanValidator());\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}